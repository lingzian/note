`taro 使用上传图片需要手动通过检测违规测试`
1 Taro.chooseImage 选择图片
2 Taro.getFileSystemManager().readFile({
          filePath: res.tempFilePaths[0],
          encoding: 'base64',}) 把图片转成base64,网上的方法是这里直接转成buffer，但是最终结果差强人意
3 使用云函数
exports.main = async (event, context) => {
  console.log(event)
  console.log(context)
  try{
    return await cloud.openapi.security.imgSecCheck({
      media: {
        contentType: event.contentType,
# 从这里再转一次buffer才可以        value: Buffer.from(event.value, 'base64')  
      }
    })
  }catch(err) {
    console.log('检测错误',err)
    throw err
  }
  
}
# 上面方法在安卓机上面会一直出现超时问题
方法二  检测sdk需要提供buffer格式的图片，用小程序其他api自己转会有一定问题，但是先上传到云存储空间再下载下来的buffer就没有问题
cloud.uploadFile
cloud.downloadFile({fileID: event.value})  从云空间下载图片要在云函数里面才能又buffer


`canvas画图`
canvas 画图需要先把网络图片转换一遍（getImageInfo）才能画上去。广告 激励视频 插屏， banner广告需要用到 AD组件， 如果需要用腾讯视频的话就要 设置 --- 第三方服务 --- 插件管理 ---添加插件  --- 腾讯视频 



`app`
穿山甲那边提供了一个新的SDK， 可以直接内嵌一个短视频模块，还有一个小说模块到app里， 我们开两个tab接入进来 整屏都是直接展示他们sdk， 比较复杂的地方是要开发一些能悬浮在SDK上的网页小组件， 做到类似抖音极速版那种边看视频边有个倒计时，看满多久时间就弹出金币奖励的逻辑 来结合进我们的奖励体系

写 webview插件指的是原生封装这个sdk时会用原生webview来打开我们的网页url实现小组件的展示

难点：倒计时转圈，根据用户观看每个视频的有效时间然后一边画圆进度，然后用户还可能触发暂停，或者单独一个视频的有效奖励时长达到了就停止画圈，等待下一个视频的开始，再继续按照需求画圈。如果使用最常见的方式直接用css去画圈，然后主体逻辑使用setTimeout去计时，判断是否到达有效时间或者用户是否暂停了视频，再去操作css停止渲染。这种方式会出现一个情况，随着暂停次数，或者一圈的有效时长增加，setTimeout计算的时间会与css动画计算的时间有误差。所以不管是主题逻辑还是css动画，都只能才用一个计时器，也就是说需要按照js里面走了多长时间去决定画圆的进度。后面使用了clippath 制作左右两个半圆，先挡住右边圆，然后旋转左边半圆，赚到一半就显示右边半圆，并且转动右半圆，使用 setInterval（（）=》 {}，100）每100毫秒就转动一定的角度（看实际情况转动角度，因为前期看一个视频只需五秒，后期可能需要20秒）,
当转动到当前视频有效时间到达的角度就触发停止（例如一圈20秒，一个视频有效时间为5秒，就是转动到），或者手动暂停了，也直接








1不用两边计时 css 跟 js逻辑 计算
2 不用总画圆时间 去计算